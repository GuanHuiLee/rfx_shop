(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay-methods/pay-methods"],{2668:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return n.e("components/common/price").then(n.bind(null,"a3e5"))},i=function(){return n.e("components/uni-ui/uni-list-item/uni-list-item").then(n.bind(null,"1c3e"))},s={components:{price:o,uniListItem:i},data:function(){return{loading:!1,detail:{id:0,price:0},payMethod:"alipay",options:[]}},onLoad:function(e){if(!e.detail)return t.showToast({title:"支付失败",icon:"none"});this.detail=JSON.parse(e.detail),this.options=[{title:"支付宝支付",note:"推荐使用支付宝支付",icon:"icon-zhifubao text-primary",value:"alipay"},{title:"微信支付",note:"",icon:"icon-weixinzhifu text-success",value:"wxpay"}]},methods:{submit:function(){this.loading||(this.loading=!0,this.appPay())},weixinMpPay:function(){var e=this;t.login({success:function(n){e.$H.get("/payment/"+e.detail.id+"/wxmppay/"+n.code,{},{token:!0,native:!0}).then(function(n){a("log",n.data," at pages\\pay-methods\\pay-methods.vue:102");var o=n.data;t.requestPayment({timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:"MD5",paySign:o.paySign,success:function(e){t.redirectTo({url:"../pay-result/pay-result"}),a("log","success:"+JSON.stringify(e)," at pages\\pay-methods\\pay-methods.vue:126")},fail:function(e){t.showModal({content:"支付失败,原因为: "+e.errMsg,showCancel:!1})},complete:function(){e.loading=!1}})}).catch(function(n){e.loading=!1,t.showToast({title:"支付失败",icon:"none"})})},fail:function(n){a("log","fail",n," at pages\\pay-methods\\pay-methods.vue:149"),e.loading=!1,t.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})}})},appPay:function(){var e=this;this.$H.get("/payment/"+this.detail.id+"/"+this.payMethod,{},{token:!0,native:!0}).then(function(n){a("log",n," at pages\\pay-methods\\pay-methods.vue:164"),t.requestPayment({provider:e.payMethod,orderInfo:n.data,success:function(e){t.redirectTo({url:"../pay-result/pay-result"}),a("log","success:"+JSON.stringify(e)," at pages\\pay-methods\\pay-methods.vue:173")},fail:function(e){t.showModal({title:"提示",content:"支付失败",showCancel:!1}),a("log","fail:"+JSON.stringify(e)," at pages\\pay-methods\\pay-methods.vue:181")},complete:function(){e.loading=!1}})}).catch(function(n){e.loading=!1,a("log",n," at pages\\pay-methods\\pay-methods.vue:189"),t.showToast({title:"支付失败",icon:"none"})})},change:function(t){this.payMethod=t.detail.value}}};e.default=s}).call(this,n("6e42")["default"],n("0de9")["default"])},3508:function(t,e,n){"use strict";n.r(e);var a=n("2668"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},"3bd6":function(t,e,n){"use strict";n.r(e);var a=n("a3f4"),o=n("3508");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);var s,c=n("f0c5"),u=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=u.exports},a3f4:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return a})},f3c2:function(t,e,n){"use strict";(function(t){n("b6b5"),n("921b");a(n("66fd"));var e=a(n("3bd6"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["f3c2","common/runtime","common/vendor"]]]);